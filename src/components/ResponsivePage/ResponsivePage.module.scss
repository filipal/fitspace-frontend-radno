.page {
  /* min-height: var(--fs-page-max-height);  ⟵ makni */
  inline-size: 100%;
  /* cijela stranica = točno vidljivi viewport */
  --fs-safe-area-top: env(safe-area-inset-top);
  --fs-safe-area-bottom: env(safe-area-inset-bottom);
  --fs-viewport-height: max(
    0px,
    calc(100svh - var(--fs-safe-area-top) - var(--fs-safe-area-bottom))
  );
  block-size: calc(
    var(--fs-viewport-height) +
    var(--fs-safe-area-top) +
    var(--fs-safe-area-bottom)
  );
  display: flex;
  flex-direction: column;
  align-items: center;
  background: var(--page-bg);
  color: var(--page-fg);
  padding-top: var(--fs-safe-area-top);
  padding-bottom: var(--fs-safe-area-bottom);
  overflow: clip; /* nema scroll trake od subpiksel overflowa */
}

@supports (block-size: 100dvh) {
  .page {
    --fs-viewport-height: max(
      0px,
      calc(100dvh - var(--fs-safe-area-top) - var(--fs-safe-area-bottom))
    );
    block-size: calc(
      var(--fs-viewport-height) +
      var(--fs-safe-area-top) +
      var(--fs-safe-area-bottom)
    );
  }
}

.header,
.footer {
  inline-size: min(100%, var(--fs-desktop-width));
  flex-shrink: 0;
  display: flex;
  justify-content: center;
  padding-inline: env(safe-area-inset-left) env(safe-area-inset-right);
}

.body {
  inline-size: min(100%, var(--fs-desktop-width));
  flex: 1 1 auto;
  display: flex;
  justify-content: center;
  padding-inline: env(safe-area-inset-left) env(safe-area-inset-right);
  position: relative;
  overflow: clip; /* zaštita */
}

.canvas {
  inline-size: var(--fs-canvas-width);
  /* min-block-size: var(--fs-canvas-height); ⟵ makni “min-” */
  block-size: var(--fs-canvas-height);
  display: flex;
  justify-content: center;
  position: relative;
  overflow: clip;
}

.canvasInner {
  inline-size: var(--fs-design-width);
  /* min-block-size: var(--fs-design-height); ⟵ makni “min-” */
  block-size: var(--fs-design-height);
  transform-origin: top center;
  transform: scale(var(--fs-scale));
  position: relative;
}

@media (min-width: 1024px) and (max-height: 600px) {
  .page {
    /* dopusti da stranica bude viša od viewporta i da se skrola */
    block-size: auto;
    min-block-size: 100dvh;
    overflow-y: auto;
  }
  .body, .canvas {
    overflow: visible; /* nemoj rezati sadržaj po Y u ovom režimu */
  }
}
